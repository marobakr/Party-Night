const allCaption = document.querySelectorAll('.booking-info .light-box a'),
  currentDate = new Date().getFullYear(),
  alllinks = document.querySelectorAll('.nav-link'),
  yearElement = (document.getElementById('year').innerHTML += currentDate),
  day = document.querySelector('.day'),
  hr = document.querySelector('.hrs'),
  min = document.querySelector('.min'),
  sec = document.querySelector('.sec');
function animateCounter(e, n) {
  let t = +e.html().split('+')[0];
  setInterval(() => {
    !(t >= n) && (t++, e.html(`${t}+`));
  }, 10);
}
function handlerIn(e) {
  let n = $(e).find('.overlay-content .inner-content');
  $(n).parent().css('background-color', ' rgba(0, 0, 0, 0.5)'),
    $(n)
      .find('h2')
      .slideDown(500, function () {
        $(n)
          .find('p')
          .slideDown(500, function () {
            $(n).find('button').slideDown(800);
          });
      });
}
function handlerOut(e) {
  let n = $(e).find('.overlay-content .inner-content');
  $(n).parent().css('background-color', ' transparent'),
    $(n)
      .find('h2')
      .slideUp(500, function () {
        $(n)
          .find('p')
          .slideUp(500, function () {
            $(n).find('button').slideUp(800);
          });
      });
}
function calculateRemainingTime() {
  let e = new Date('2024-03-25');
  e.setDate(e.getDate());
  let n = new Date(),
    t = e.getTime() - n.getTime();
  (day.innerHTML = `day ${Math.floor(t / 864e5)}`),
    (hr.innerHTML = `Hours ${24 * Math.floor((t % 864e5) / 36e5)}`),
    (min.innerHTML = `Minutes ${Math.floor((t % 36e5) / 6e4)}`),
    (sec.innerHTML = `Seconds ${Math.floor((t % 6e4) / 1e3)}`);
}
function animationCardParty() {
  $('.card').eq(0).animate({ height: 'toggle' }, 2e3),
    $('.card').eq(1).animate({ height: 'toggle' }, 2e3),
    $('.card')
      .eq(2)
      .animate({ height: 'toggle' }, 2e3, function () {
        $('.card').eq(3).animate({ height: 'toggle' }, 2e3),
          $('.card').eq(4).animate({ height: 'toggle' }, 2e3),
          $('.card').eq(5).animate({ height: 'toggle' }, 2e3);
      });
}
function slideHeroSecion() {
  $('#hero').slideDown(3e3, function () {
    $(this).addClass('d-flex'), $('.animation').slideDown(2e3);
  });
}
function animationScrolling() {
  let e = $(window).scrollTop(),
    n = $('#event').offset().top;
  e > n - $('nav').innerHeight()
    ? ($('nav').css({ background: '#262626DB' }),
      $('nav .container').css('padding-inline', '3rem'))
    : ($('nav').css({ background: 'transparent' }),
      $('nav .container').css('padding-inline', '12px'));
  let t = $(this).scrollTop();
  $('section').each(function () {
    let e = $(this).attr('id'),
      n = $(this).offset().top - $('nav').innerHeight(),
      i = n + $(this).outerHeight();
    if (t >= n && t < i) {
      let o = $(this).attr('id');
      $(`a[href^="#${o}"]`).addClass('active');
    } else (e = $(this).attr('id')), $(`a[href^="#${e}"]`).removeClass('active');
  });
}
function counterRunning() {
  $(window).scrollTop(),
    $('#about').offset().top,
    $('.num')
      .eq(0)
      .slideDown(1e3, function () {
        animateCounter($('#about .num span').eq(0), 15),
          $('.num')
            .eq(1)
            .slideDown(1e3, function () {
              animateCounter($('#about .num span').eq(1), 50),
                $('.num')
                  .eq(2)
                  .slideDown(1e3, function () {
                    animateCounter($('#about .num span').eq(2), 800),
                      $('.num')
                        .eq(3)
                        .slideDown(1e3, function () {
                          animateCounter($('#about .num span').eq(3), 700);
                        });
                  });
            });
      });
}
$(document).ready(function () {
  $('.loader').fadeOut(4e3, function () {
    $(window).scrollTop(0),
      $('#loding').slideUp(2e3, function () {
        $('body').css('overflow', 'auto'),
          slideHeroSecion(),
          $('a[href^="#"]').on('click', function (e) {
            e.preventDefault();
            let n = e.target.getAttribute('href');
            $('body,html').animate(
              { scrollTop: $(`${n}`).offset().top - $('nav').innerHeight() },
              1e3
            );
          });
        let e = !1,
          n = !1;
        $(window).on('scroll', function () {
          animationScrolling(),
            $(window).scrollTop() > $('.discography').offset().top &&
              !e &&
              (animationCardParty(), (e = !0)),
            $(window).scrollTop() > $('#about').offset().top &&
              !n &&
              (counterRunning(), (n = !0));
        });
      });
  }),
    setInterval(() => {
      calculateRemainingTime();
    }, 1e3),
    calculateRemainingTime(),
    AOS.init(),
    $('.discography .card figure').hover(
      function () {
        handlerIn(this);
      },
      function () {
        handlerOut(this);
      }
    ),
    $('.artist').slick({
      slidesToShow: 3,
      slidesToScroll: 1,
      autoplay: !0,
      autoplaySpeed: 2e3,
      centerMode: !0,
      centerPadding: '0px',
      responsive: [
        {
          breakpoint: 768,
          settings: { arrows: !0, centerPadding: '0px', slidesToShow: 2 },
        },
        {
          breakpoint: 480,
          settings: { arrows: !0, centerPadding: '0px', slidesToShow: 1 },
        },
      ],
    }),
    $('.single-item').slick({ dots: !0, infinite: !0, arrows: !1 }),
    $('.responsive').slick({
      dots: !1,
      infinite: !0,
      speed: 300,
      arrows: !1,
      slidesToShow: 4,
      slidesToScroll: 4,
      responsive: [
        {
          breakpoint: 1024,
          settings: {
            slidesToShow: 3,
            slidesToScroll: 3,
            infinite: !0,
            dots: !1,
          },
        },
        { breakpoint: 600, settings: { slidesToShow: 2, slidesToScroll: 2 } },
        { breakpoint: 480, settings: { slidesToShow: 1, slidesToScroll: 1 } },
      ],
    }),
    Fancybox.bind('[data-fancybox]');
}),
  allCaption.forEach((e) => {
    e.setAttribute('data-caption', e.href.split('img/')[1]);
  }),
  alllinks.forEach((e) => {
    e.addEventListener('click', function (e) {
      document.querySelector('.nav-link.active').classList.remove('active'),
        this.classList.add('active');
    });
  });
